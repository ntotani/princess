machine:
  environment:
    XCODE_SCHEME: princess iOS

dependencies:
    cache_directories:
        - runtime/test
    pre:
        - brew install tree
        - brew tap homebrew/versions
        - brew install glfw3
        - |
            if [ ! -e runtime/test ]; then
                python frameworks/cocos2d-x/download-deps.py -r yes
                mkdir -p runtime/test
                cd runtime/test
                cmake -DCMAKE_BUILD_TYPE=Debug -DDEBUG_MODE=ON ../../frameworks
                make
            fi

test:
    override:
        - tree runtime/test
        - runtime/test/bin/princess `pwd`/

