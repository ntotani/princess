machine:
  environment:
    XCODE_SCHEME: princess iOS

dependencies:
    cache_directories:
        - runtime/test/bin
    pre:
        - brew tap homebrew/versions
        - brew install glfw3
        - python frameworks/cocos2d-x/download-deps.py -r yes
        - |
            if [ ! -e runtime/test/bin ]; then
                mkdir -p runtime/test
                cd runtime/test
                cmake -DCMAKE_BUILD_TYPE=Debug -DDEBUG_MODE=ON ../../frameworks
                make
            fi

test:
    override:
        - runtime/test/bin/princess `pwd`/

